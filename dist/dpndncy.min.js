(function(a,b){"undefined"!=typeof module&&module.exports?module.exports=b():"function"==typeof define&&define.amd?define(b):this[a]=b()})("dpndncy",function(){var a=document.getElementsByTagName("head")[0],b=function(){if(!(this instanceof b))throw new Error("dpndncy must be constructed via new.");var c=[],d=[],f=[],g=!1,h="",i=function(a){for(var b=!1,d=0;d<c.length;d++)if(c[d].url===a){b={index:d,file:c[d]};break}return b},j=function(a,b){i(a)||c.push({url:a,type:b.type||"script",crossOrigin:b.crossOrigin||!1,none:b.nonce||!1,integrity:b.integrity||!1,media:b.media||!1})},k=function(b){if(!g){var i=0;g=!0;var j=function(e){if(e>c.length-1)return"function"==typeof b&&b({success:{count:f.length,files:[].concat(f)},failed:{count:d.length,files:[].concat(d)}}),c.length=0,d.length=0,void(f.length=0);if(0<c.length){var g=c[e],k=g.type,l=document.createElement("script"===k||"module"===k?"SCRIPT":"LINK");if(""!==h){var m=g.url.indexOf("?");if(-1!==m){var n=g.url.substring(m+1,g.url.length),o=g.url.substring(0,m);g.url=o+"?"+n+"&"+h}else g.url=g.url+"?"+h}"module"===k||"script"===k?(l.src=g.url,l.type="module"===k?"module":"text/javascript"):(l.rel="stylesheet",l.type="text/css",l.href=g.url,g.media&&(l.media=g.media)),g.integrity&&(l.integrity=g.integrity),g.crossOrigin&&(l.crossOrigin=g.crossOrigin),g.nonce&&(l.nonce=g.nonce),"onload"in l&&"onerror"in l&&(l.onload=l.onerror=function(a){a&&a.type&&("error"===a.type?d.push(g.url):f.push(g.url)),i++,l.onload=l.onerror=null,l=null,j(i)}),a.appendChild(l)}};j(i)}};this.setUrlParams=function(a){h=a},this.addScript=function(a,b){return b=b||{},j(a,{type:"script",integrity:b.integrity||!1,nonce:b.nonce||!1,crossOrigin:b.crossOrigin||!1})},this.addModule=function(a,b){return b=b||{},j(a,{type:"module",integrity:b.integrity||!1,nonce:b.nonce||!1,crossOrigin:b.crossOrigin||!1})},this.addStyle=function(a,b){return b=b||{},j(a,{type:"style",integrity:b.integrity||!1,nonce:b.nonce||!1,crossOrigin:b.crossOrigin||!1,media:b.media||!1})},this.ready=function(a){if(!g)return k(a)},this.run=function(b,c){g||k(function(){var d=document.createElement("script");c&&(d.type="module"),d.src=b,a.appendChild(d),d=null})}};return b});
